<robot name="robot_model">

  <!-- ================= BASE FOOTPRINT ================= -->
  <link name="base_footprint"/>

  <joint name="base_footprint_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <!-- ================= BASE LINK ================= -->
  <link name="base_link">
    <inertial>
      <origin xyz="3.9148E-14 -4.0075E-13 0.026236" rpy="0 0 0"/>
      <mass value="3.2862"/>
      <inertia
        ixx="0.052662" ixy="5.7223E-11" ixz="5.2915E-16"
        iyy="0.052268" iyz="-1.7097E-18" izz="0.10465"/>
    </inertial>

    <visual>
      <geometry>
        <mesh filename="package://robot_model/meshes/base_link.STL"/>
      </geometry>
    </visual>

    <collision>
      <geometry>
        <mesh filename="package://robot_model/meshes/base_link.STL"/>
      </geometry>
    </collision>
    <gazebo reference="base_link">
      <mu1>1.0</mu1>
      <mu2>1.0</mu2>
      <kp>1000000.0</kp>
      <kd>1.0</kd>
    </gazebo>

  </link>

  <!-- ================= LEFT FRONT WHEEL ================= -->
  <link name="left_wheel_front">
    <inertial>
      <origin xyz="-8.9512E-06 -6.1532E-06 0.016295" rpy="0 0 0"/>
      <mass value="0.98637"/>
      <inertia
        ixx="0.001417" ixy="-1.0957E-07" ixz="2.7751E-07"
        iyy="0.0014171" iyz="1.9089E-07" izz="0.0023056"/>
    </inertial>

    <visual>
      <geometry>
        <mesh filename="package://robot_model/meshes/left_wheel_front.STL"/>
      </geometry>
    </visual>

    <collision>
      <geometry>
        <mesh filename="package://robot_model/meshes/left_wheel_front.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="left_wheel_front_joint" type="continuous">
    <parent link="base_link"/>
    <child link="left_wheel_front"/>
    <origin xyz="0.118 0.3005 -0.021" rpy="1.5708 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="10.0" velocity="20.0"/>
  </joint>

  <!-- ================= LEFT REAR WHEEL ================= -->
  <link name="left_wheel_rear">
    <inertial>
      <origin xyz="-8.9512E-06 -6.1532E-06 0.016793" rpy="0 0 0"/>
      <mass value="0.98637"/>
      <inertia
        ixx="0.001417" ixy="-1.0957E-07" ixz="2.7751E-07"
        iyy="0.0014171" iyz="1.9089E-07" izz="0.0023056"/>
    </inertial>

    <visual>
      <geometry>
        <mesh filename="package://robot_model/meshes/left_wheel_rear.STL"/>
      </geometry>
    </visual>

    <collision>
      <geometry>
        <mesh filename="package://robot_model/meshes/left_wheel_rear.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="left_wheel_rear_joint" type="continuous">
    <parent link="base_link"/>
    <child link="left_wheel_rear"/>
    <origin xyz="-0.11875 0.3005 -0.021096" rpy="1.5708 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="10.0" velocity="20.0"/>
  </joint>

  <!-- ================= RIGHT FRONT WHEEL ================= -->
  <link name="right_wheel_front">
    <inertial>
      <origin xyz="8.9513E-06 -6.1533E-06 -0.016793" rpy="0 0 0"/>
      <mass value="0.98637"/>
      <inertia
        ixx="0.001417" ixy="1.0957E-07" ixz="2.7751E-07"
        iyy="0.0014171" iyz="-1.9089E-07" izz="0.0023056"/>
    </inertial>

    <visual>
      <geometry>
        <mesh filename="package://robot_model/meshes/right_wheel_front.STL"/>
      </geometry>
    </visual>

    <collision>
      <geometry>
        <mesh filename="package://robot_model/meshes/right_wheel_front.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="right_wheel_front_joint" type="continuous">
    <parent link="base_link"/>
    <child link="right_wheel_front"/>
    <origin xyz="0.118 -0.301 -0.021" rpy="1.5708 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="10.0" velocity="20.0"/>
  </joint>

  <!-- ================= RIGHT REAR WHEEL ================= -->
  <link name="right_wheel_rear">
    <inertial>
      <origin xyz="-8.9513E-06 6.1533E-06 -0.016793" rpy="0 0 0"/>
      <mass value="0.98637"/>
      <inertia
        ixx="0.001417" ixy="1.0957E-07" ixz="-2.7751E-07"
        iyy="0.0014171" iyz="1.9089E-07" izz="0.0023056"/>
    </inertial>

    <visual>
      <geometry>
        <mesh filename="package://robot_model/meshes/right_wheel_rear.STL"/>
      </geometry>
    </visual>

    <collision>
      <geometry>
        <mesh filename="package://robot_model/meshes/right_wheel_rear.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="right_wheel_rear_joint" type="continuous">
    <parent link="base_link"/>
    <child link="right_wheel_rear"/>
    <origin xyz="-0.118 -0.301 -0.021" rpy="1.5708 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="10.0" velocity="20.0"/>
  </joint>
  
<!-- ================= ROS2 CONTROL ================= -->
<ros2_control name="RobotSystem" type="system">
  <hardware>
    <plugin>gazebo_ros2_control/GazeboSystem</plugin>
  </hardware>

  <joint name="left_wheel_front_joint">
    <command_interface name="velocity"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>

  <joint name="left_wheel_rear_joint">
    <command_interface name="velocity"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>

  <joint name="right_wheel_front_joint">
    <command_interface name="velocity"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>

  <joint name="right_wheel_rear_joint">
    <command_interface name="velocity"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>
</ros2_control>

<!-- ================= GAZEBO ROS2 CONTROL ================= -->
<gazebo>
  <plugin name="gazebo_ros2_control" filename="libgazebo_ros2_control.so"/>
</gazebo>
<gazebo reference="left_wheel_front">
  <mu1>2.0</mu1>
  <mu2>2.0</mu2>
  <kp>1000000.0</kp>
  <kd>1.0</kd>
</gazebo>
<gazebo reference="left_wheel_rear">
  <mu1>2.0</mu1>
  <mu2>2.0</mu2>
  <kp>1000000.0</kp>
  <kd>1.0</kd>
</gazebo>
<gazebo reference="right_wheel_front">
  <mu1>2.0</mu1>
  <mu2>2.0</mu2>
  <kp>1000000.0</kp>
  <kd>1.0</kd>
</gazebo>
<gazebo reference="right_wheel_rear">
  <mu1>2.0</mu1>
  <mu2>2.0</mu2>
  <kp>1000000.0</kp>
  <kd>1.0</kd>
</gazebo>

<!-- ================= TRANSMISSIONS ================= -->

<transmission name="left_wheel_front_trans">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="left_wheel_front_joint">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
  </joint>
  <actuator name="left_wheel_front_motor">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>

<transmission name="left_wheel_rear_trans">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="left_wheel_rear_joint">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
  </joint>
  <actuator name="left_wheel_rear_motor">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>

<transmission name="right_wheel_front_trans">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="right_wheel_front_joint">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
  </joint>
  <actuator name="right_wheel_front_motor">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>

<transmission name="right_wheel_rear_trans">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="right_wheel_rear_joint">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
  </joint>
  <actuator name="right_wheel_rear_motor">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>

</robot>

